<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> 转驻 转  - 驻专 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@400;700;900&display=swap');

        body {
            font-family: 'Heebo', sans-serif;
            background: linear-gradient(-45deg, #0f0f1a, #1a1a2e, #0a0a2a, #110a1f);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 注爪  砖拽  */
        .neon-text {
            text-shadow: 0 0 10px rgba(0, 191, 255, 0.8), 0 0 20px rgba(0, 191, 255, 0.4);
        }
        
        .neon-box {
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.3), inset 0 0 10px rgba(0, 191, 255, 0.2);
            border: 1px solid rgba(0, 191, 255, 0.5);
        }

        .neon-box-red {
            box-shadow: 0 0 15px rgba(255, 0, 85, 0.3), inset 0 0 10px rgba(255, 0, 85, 0.2);
            border: 1px solid rgba(255, 0, 85, 0.5);
        }

        .neon-box-green {
            box-shadow: 0 0 15px rgba(0, 255, 128, 0.3), inset 0 0 10px rgba(0, 255, 128, 0.2);
            border: 1px solid rgba(0, 255, 128, 0.5);
        }

        /* 爪转 转转 驻转 */
        .trapdoor {
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-origin: top;
        }

        .trapdoor.open {
            transform: rotateX(-90deg);
            opacity: 0.5;
            box-shadow: none;
            border-color: #333;
        }

        /* 注爪 驻专 注 */
        .mask-bg {
            position: absolute;
            opacity: 0.03;
            font-size: 15rem;
            z-index: 0;
            pointer-events: none;
        }

        /*  转砖 */
        .answer-container {
            perspective: 1000px;
        }

        /* 驻转专  */
        .btn-game {
            background: linear-gradient(to bottom, #00b4db, #0083b0);
            border: none;
            transition: all 0.2s;
        }
        .btn-game:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 180, 219, 0.4);
        }
        .btn-game:active:not(:disabled) {
            transform: translateY(1px);
        }

        .btn-game:disabled {
            background: #4a5568;
            color: #a0aec0;
            transform: none;
            box-shadow: none;
            cursor: not-allowed;
        }

        /* 爪转 爪 */
        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); text-shadow: 0 0 30px #00ff80; }
            100% { transform: scale(1); }
        }
        .celebrate {
            animation: celebrate 1s ease infinite;
        }

        /* 爪转 住 转砖转 */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }
        .invisible-item {
            opacity: 0;
            pointer-events: none;
        }

        /* 驻拽 专拽 */
        .shine-effect {
            position: relative;
            overflow: hidden;
        }
        .shine-effect::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0) 100%);
            transform: skewX(-20deg);
            animation: shine 3s infinite;
        }
        @keyframes shine {
            0% { left: -100%; }
            20% { left: 200%; }
            100% { left: 200%; }
        }
    </style>
</head>
<body class="relative">
    <!-- 专拽注 驻专 注 -->
    <div class="mask-bg top-10 left-10"></div>
    <div class="mask-bg bottom-10 right-10"></div>

    <div class="container mx-auto px-4 py-6 max-w-5xl relative z-10 flex-grow flex flex-col h-screen">
        
        <!-- 住 驻转 -->
        <main id="welcome-screen" class="flex-grow flex flex-col items-center justify-center text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-gray-300">专  砖注砖注</h2>
            <h1 class="text-6xl md:text-8xl font-black mb-6 text-blue-400 neon-text leading-tight"> 转驻 转 </h1>
            
            <div class="mb-12 w-full max-w-md">
                <label for="class-name-input" class="block text-2xl font-bold mb-4 text-yellow-400">砖 转 转专:</label>
                <input type="text" id="class-name-input" placeholder=": '2 驻拽" class="w-full bg-gray-800 border-2 border-blue-500 rounded-xl py-4 px-6 text-2xl font-bold text-center text-white focus:outline-none focus:border-yellow-400">
            </div>

            <button onclick="startGame()" class="btn-game text-white font-bold text-3xl py-6 px-16 rounded-full shadow-[0_0_30px_rgba(0,191,255,0.6)] hover:scale-105 transition-transform">
                转 砖拽
            </button>
        </main>

        <!-- 转专转 注 爪  -->
        <header id="game-header" class="hidden justify-between items-center border-b border-gray-700 pb-4 mb-6">
            <div>
                <h1 class="text-3xl md:text-5xl font-black neon-text text-blue-400"> 转驻 转 </h1>
                <p id="game-header-class-name" class="text-gray-400 mt-1">砖拽 注  拽驻!</p>
            </div>
            <!-- 砖注 注爪专 -->
            <div id="timer-display" class="hidden text-6xl font-black text-red-500 neon-box-red px-6 py-2 rounded-xl">
                10
            </div>
            <div class="text-center bg-gray-900 rounded-xl p-4 neon-box">
                <p class="text-sm text-gray-400 mb-1">砖</p>
                <div class="text-3xl font-bold text-yellow-400"><span id="current-q-num">1</span> / 6</div>
            </div>
        </header>

        <!-- 专 砖拽 专 -->
        <main class="hidden flex-grow flex-col justify-center" id="game-screen">
            
            <!-- 专 砖 -->
            <div class="text-center mb-12">
                <h2 id="question-text" class="text-4xl md:text-6xl font-bold leading-tight mb-4 min-h-[120px] flex items-center justify-center">
                    注 砖...
                </h2>
            </div>

            <!-- 专 转砖转 (转转) -->
            <div id="answers-container" class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12 flex-grow">
                <!-- 转 0 -->
                <div class="answer-container flex flex-col h-full relative">
                    <div id="trapdoor-0" class="trapdoor invisible-item flex-grow bg-gray-900 neon-box rounded-xl p-8 flex flex-col items-center justify-center relative z-10 min-h-[200px] hover:bg-gray-800 transition-colors">
                        <span class="text-gray-500 absolute top-4 right-4 text-2xl font-bold"></span>
                        <span id="answer-text-0" class="text-3xl md:text-4xl font-bold text-center mt-4">转砖 1</span>
                    </div>
                </div>

                <!-- 转 1 -->
                <div class="answer-container flex flex-col h-full relative">
                    <div id="trapdoor-1" class="trapdoor invisible-item flex-grow bg-gray-900 neon-box rounded-xl p-8 flex flex-col items-center justify-center relative z-10 min-h-[200px] hover:bg-gray-800 transition-colors">
                        <span class="text-gray-500 absolute top-4 right-4 text-2xl font-bold"></span>
                        <span id="answer-text-1" class="text-3xl md:text-4xl font-bold text-center mt-4">转砖 2</span>
                    </div>
                </div>

                <!-- 转 2 -->
                <div class="answer-container flex flex-col h-full relative">
                    <div id="trapdoor-2" class="trapdoor invisible-item flex-grow bg-gray-900 neon-box rounded-xl p-8 flex flex-col items-center justify-center relative z-10 min-h-[200px] hover:bg-gray-800 transition-colors">
                        <span class="text-gray-500 absolute top-4 right-4 text-2xl font-bold"></span>
                        <span id="answer-text-2" class="text-3xl md:text-4xl font-bold text-center mt-4">转砖 3</span>
                    </div>
                </div>
            </div>

            <!-- 驻转专 砖驻转 转砖 -->
            <div class="text-center mt-auto pb-8">
                <button id="reveal-btn" disabled onclick="revealAnswers()" class="btn-game text-white font-bold text-3xl py-6 px-16 rounded-full shadow-lg opacity-50 w-full md:w-auto max-w-lg mx-auto transition-all">
                    转 注转 转砖转...
                </button>
            </div>

        </main>

        <!-- 住 砖驻转 转砖  -->
        <main id="big-reveal-screen" class="hidden flex-grow flex flex-col items-center justify-center text-center">
            <h2 class="text-5xl text-gray-300 mb-10">转砖  ...</h2>
            <div id="big-correct-answer" class="text-6xl md:text-8xl font-black text-green-400 neon-box-green p-16 rounded-3xl bg-gray-900 shadow-[0_0_50px_rgba(0,255,128,0.4)] mb-12 shine-effect">
                转砖
            </div>
            <button onclick="nextQuestion()" class="btn-game text-white font-bold text-2xl py-4 px-12 rounded-full mt-8">
                砖 
            </button>
        </main>

        <!-- 住 住 -->
        <main id="end-screen" class="hidden flex-grow flex flex-col items-center justify-center text-center">
            <h1 class="text-7xl font-black mb-6 text-yellow-400 neon-text">住转 转 砖拽!</h1>
            <p id="end-subtitle" class="text-4xl text-gray-300 mb-6">  转!</p>
            <p class="text-4xl font-bold text-blue-300 mb-12 animate-pulse">转  转 ! </p>
            
            <button onclick="location.reload()" class="btn-game text-white font-bold text-2xl py-4 px-12 rounded-full">
                专 住 专砖
            </button>
        </main>
    </div>

    <script>
        // --- 转 砖拽 ---
        const gameData = [
            {
                id: 1,
                question: "驻 爪 Baby 砖 '住 专?",
                correctAnswer: "",
                incorrectAnswers: [" 驻专拽", "转转 拽"]
            },
            {
                id: 2,
                question: " 拽转 砖拽转 拽?",
                correctAnswer: "住拽  + 注 ",
                incorrectAnswers: ["住拽 + ", "住拽 + 拽拽住"]
            },
            {
                id: 3,
                question: "砖  砖专 祝 ?",
                correctAnswer: "",
                incorrectAnswers: ["专转", "砖"]
            },
            {
                id: 4,
                question: "  专住专?",
                correctAnswer: "砖专 砖注转 专",
                incorrectAnswers: ["住 砖 专 专", "砖 砖"]
            },
            {
                id: 5,
                question: " 住专 专拽住  专拽  砖拽?",
                correctAnswer: "住  ",
                incorrectAnswers: ["爪'专 爪", "拽抓 拽专住"]
            },
            {
                id: 6,
                question: " 拽专 转 砖  爪驻转?",
                correctAnswer: "砖",
                incorrectAnswers: ["拽", "专砖"]
            }
        ];

        // --- 爪 砖拽 (State) ---
        let state = {
            currentQuestionIndex: 0,
            currentAnswers: [],
            correctAnswerIndex: -1,
            isRevealing: false,
            timerInterval: null,
            className: ""
        };

        const shuffleArray = (array) => {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        };

        // --- 住 ---
        const playSound = (type) => {
            console.log(`Playing sound: ${type}`);
            // if (type === 'tv_reveal') {
            //     const audio = new Audio(`tv_reveal_sound.mp3`);
            //     audio.play().catch(e => console.log("Audio play prevented"));
            // }
        };

        // --- 拽转 砖拽 注拽专转 ---
        
        const initApp = () => {
            document.getElementById('welcome-screen').classList.remove('hidden');
            document.getElementById('game-header').classList.add('hidden');
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('end-screen').classList.add('hidden');
            document.getElementById('big-reveal-screen').classList.add('hidden');
        };

        const startGame = () => {
            const nameInput = document.getElementById('class-name-input').value.trim();
            const className = nameInput !== "" ? nameInput : "转 转专";

            state = {
                currentQuestionIndex: 0,
                currentAnswers: [],
                correctAnswerIndex: -1,
                isRevealing: false,
                timerInterval: null,
                className: className
            };

            document.getElementById('game-header-class-name').textContent = `驻专 ${className} - 砖拽 注  拽驻!`;
            document.getElementById('end-subtitle').textContent = `  ${className}!`;

            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('end-screen').classList.add('hidden');
            document.getElementById('game-header').classList.remove('hidden');
            document.getElementById('game-header').classList.add('flex');
            
            loadQuestion();
        };

        const loadQuestion = () => {
            clearInterval(state.timerInterval);
            document.getElementById('timer-display').classList.add('hidden');
            document.getElementById('big-reveal-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('flex');

            if (state.currentQuestionIndex >= gameData.length) {
                endGame();
                return;
            }

            const questionData = gameData[state.currentQuestionIndex];
            
            // 注 转专转
            document.getElementById('current-q-num').textContent = state.currentQuestionIndex + 1;
            document.getElementById('question-text').textContent = questionData.question;

            // 转 转砖转 (注专)
            const allAnswers = [questionData.correctAnswer, ...questionData.incorrectAnswers];
            state.currentAnswers = shuffleArray(allAnswers);
            state.correctAnswerIndex = state.currentAnswers.indexOf(questionData.correctAnswer);

            state.isRevealing = false;

            // 驻住 UI 砖 转转 驻转专
            const revealBtn = document.getElementById('reveal-btn');
            revealBtn.disabled = true;
            revealBtn.textContent = "转 注转 转砖转...";
            revealBtn.classList.add('opacity-50');
            revealBtn.classList.remove('animate-pulse', 'shadow-[0_0_20px_rgba(0,191,255,0.6)]');

            for (let i = 0; i < 3; i++) {
                const trapdoor = document.getElementById(`trapdoor-${i}`);
                trapdoor.classList.remove('open', 'neon-box-red', 'neon-box-green', 'fade-in-up', 'celebrate');
                trapdoor.classList.add('neon-box', 'invisible-item');
                document.getElementById(`answer-text-${i}`).textContent = state.currentAnswers[i];
            }
            
            // 爪转 转砖转 转 专 砖
            setTimeout(() => showTrapdoor(0), 1000);
            setTimeout(() => showTrapdoor(1), 2500);
            setTimeout(() => {
                showTrapdoor(2);
                setTimeout(startTimer, 1000);
            }, 4000);
        };

        const showTrapdoor = (index) => {
            const trapdoor = document.getElementById(`trapdoor-${index}`);
            trapdoor.classList.remove('invisible-item');
            trapdoor.classList.add('fade-in-up');
            playSound('reveal_option');
        };

        const startTimer = () => {
            let timeLeft = 10;
            const timerDisplay = document.getElementById('timer-display');
            timerDisplay.textContent = timeLeft;
            timerDisplay.classList.remove('hidden', 'animate-pulse');
            
            const revealBtn = document.getElementById('reveal-btn');
            revealBtn.disabled = false;
            revealBtn.textContent = "注转 转砖";
            revealBtn.classList.remove('opacity-50');
            revealBtn.classList.add('shadow-[0_0_15px_rgba(0,191,255,0.4)]');
            
            state.timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                
                if(timeLeft <= 3 && timeLeft > 0) {
                    timerDisplay.classList.add('animate-pulse');
                    playSound('tick');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(state.timerInterval);
                    timerDisplay.classList.remove('animate-pulse');
                    
                    //  专, 砖转 驻转专 砖驻
                    revealBtn.textContent = "砖祝 转砖 ";
                    revealBtn.classList.add('animate-pulse', 'shadow-[0_0_20px_rgba(0,191,255,0.6)]');
                    playSound('time_up');
                }
            }, 1000);
        };

        // --- 砖驻转 转砖 (专) ---

        const revealAnswers = () => {
            if (state.isRevealing) return;
            state.isRevealing = true;
            
            // 注爪专转 专 拽专 砖爪 驻 转 
            clearInterval(state.timerInterval);
            document.getElementById('timer-display').classList.remove('animate-pulse');
            
            document.getElementById('reveal-btn').disabled = true;
            document.getElementById('reveal-btn').textContent = "注 转转...";
            document.getElementById('reveal-btn').classList.remove('animate-pulse');

            playSound('suspense');

            // 驻  转 转转 砖转 住 转 
            for (let i = 0; i < 3; i++) {
                const trapdoor = document.getElementById(`trapdoor-${i}`);
                trapdoor.classList.remove('neon-box');

                if (i === state.correctAnswerIndex) {
                    // 转砖 
                    trapdoor.classList.add('neon-box-green', 'celebrate');
                } else {
                    // 转砖 砖 - 转 驻转
                    trapdoor.classList.add('open', 'neon-box-red');
                    playSound('drop');
                }
            }

            // 转 3 砖转 砖专  驻  注专 住 
            setTimeout(() => {
                showBigRevealScreen();
            }, 3000);
        };

        const showBigRevealScreen = () => {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('flex');
            
            const bigRevealScreen = document.getElementById('big-reveal-screen');
            bigRevealScreen.classList.remove('hidden');
            bigRevealScreen.classList.add('flex');
            
            document.getElementById('big-correct-answer').textContent = state.currentAnswers[state.correctAnswerIndex];
            playSound('tv_reveal');
        };

        const nextQuestion = () => {
            state.currentQuestionIndex++;
            loadQuestion();
        };

        const endGame = () => {
            playSound('finish');
            
            document.getElementById('game-header').classList.add('hidden');
            document.getElementById('game-header').classList.remove('flex');
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('flex');
            document.getElementById('big-reveal-screen').classList.add('hidden');
            document.getElementById('big-reveal-screen').classList.remove('flex');
            
            const endScreen = document.getElementById('end-screen');
            endScreen.classList.remove('hidden');
        };

        // 转
        initApp();

    </script>
</body>
</html>
